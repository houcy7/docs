(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{515:function(t,s,e){"use strict";e.r(s);var o=e(4),v=Object(o.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内容"}},[t._v("#")]),t._v(" 内容")]),t._v(" "),e("p",[e("code",[t._v("odin")]),t._v("原有的操作日志使用"),e("code",[t._v("注解")]),t._v("实现，norns为"),e("code",[t._v("硬编码")]),t._v("；"),e("code",[t._v("odin")]),t._v("的操作日志通过"),e("code",[t._v("http请求")]),t._v("调用"),e("code",[t._v("norns")]),t._v("接口，\n由"),e("code",[t._v("norns")]),t._v("进行数据库插入。在"),e("code",[t._v("5.7.19")]),t._v("版本，将"),e("code",[t._v("norns")]),t._v("的硬编码注解去掉，并引入了注解。同时，也添加了一个用来\n记录小程序操作记录的注解。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008i3skNly1grwxvh9i60j31dj0u0dxz.jpg",alt:""}})]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),e("ul",[e("li",[t._v("小程序的登录逻辑不是通过"),e("code",[t._v("shiro")]),t._v("实现的，所以在记录小程序操作日志时获取当前登录人需要通过"),e("code",[t._v("请求头")]),t._v("中的"),e("code",[t._v("token")]),t._v("到"),e("code",[t._v("redis")]),t._v("进行查取。\n"),e("img",{attrs:{src:"https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008i3skNly1grwy1sqk0bj31dj0u0dw6.jpg",alt:""}})]),t._v(" "),e("li",[t._v("记录登录时信息，当次请求没有token，需要在获取登录用户信息为空时，尝试从"),e("code",[t._v("response")]),t._v("中获取"),e("code",[t._v("用户id")]),t._v("，再去获取用户信息。\n"),e("img",{attrs:{src:"https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008i3skNly1grwy4vzubuj61dj0u0asn02.jpg",alt:""}})])])])])}),[],!1,null,null,null);s.default=v.exports}}]);